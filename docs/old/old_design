
---

## ï¿½ NghiÃªn Cá»©u Tá»« CÃ¡c Há»‡ Thá»‘ng HÃ ng Äáº§u

### 1. HubSpot Marketing Hub
**Cáº¥u trÃºc chÃ­nh:**
- **Contacts** (email, name, phone, company, lifecycleStage, leadScore, lastActivityDate)
- **Companies** (name, industry, revenue, size, website)
- **Campaigns** (name, type, goal, budget, status) + CampaignEmail + CampaignEmailEvents
- **Deals** (dealName, amount, stage, closeDate, pipeline)
- **Content (HubDB)** â€” báº£ng dá»¯ liá»‡u cÃ³ cáº¥u trÃºc cho dynamic pages
- **Activities** (emails, calls, meetings, notes â€” liÃªn káº¿t contact/company)
- **Associations** â€” junction tables liÃªn káº¿t táº¥t cáº£ objects

**BÃ i há»c rÃºt ra:**
- âœ… Má»i thá»© xoay quanh Contact/Company â†’ ChÃºng ta láº¥y Brand lÃ m trung tÃ¢m
- âœ… Campaign cÃ³ email events tracking â†’ ChÃºng ta cáº§n agent_logs
- âœ… Activities/Interactions table theo dÃµi má»i touchpoint
- âœ… Properties system linh hoáº¡t â†’ DÃ¹ng JSON fields cho custom data

### 2. Mailchimp
**Cáº¥u trÃºc chÃ­nh:**
- **Audiences/Lists** (central contact pool) â€” 1 audience chá»©a táº¥t cáº£ contacts
- **Contacts** (email, firstName, lastName, tags, groups, segments, customFields)
- **Tags** â€” labels linh hoáº¡t Ä‘á»ƒ phÃ¢n loáº¡i contacts
- **Segments** â€” dynamic queries tá»± Ä‘á»™ng update
- **Campaigns** (subject, content, recipients, schedule, status)
- **Content Manager** â€” quáº£n lÃ½ files/assets trung tÃ¢m

**BÃ i há»c rÃºt ra:**
- âœ… Tags/Segments thay vÃ¬ rigid categories â†’ DÃ¹ng JSON arrays cho tags
- âœ… Single Audience model â†’ Brand lÃ  audience wrapper
- âœ… Content Manager riÃªng â†’ TÃ­ch há»£p media vÃ o content_pieces

### 3. ActiveCampaign
**Cáº¥u trÃºc chÃ­nh:**
- **Contacts** (email, phone, customFields, tags, lists)
- **Lists** â€” top-level segments
- **Tags** â€” flexible labels trigger automations
- **Custom Objects** â€” data model tÃ¹y chá»‰nh (contracts, products...)
- **Automations** â€” workflows dá»±a trÃªn contact data + tags
- **Content Manager** â€” central hub cho files (JPG, PNG, GIF, PDF)

**BÃ i há»c rÃºt ra:**
- âœ… Automations concept â†’ agent_logs + campaign_tasks
- âœ… Custom Objects â†’ Thiáº¿t káº¿ schema linh hoáº¡t vá»›i JSON
- âœ… Content Manager â†’ mediaFiles trong content_pieces

### 4. Content Marketing Platform Best Practices
**Cáº¥u trÃºc chuáº©n:**
- **ContentItems** (title, body, contentTypeId, authorId, status, publishDate, versionNumber)
- **ContentTypes** (typeName: Blog/Whitepaper/Infographic/Video)
- **ContentStatuses** (Draft â†’ PendingReview â†’ Approved â†’ Published â†’ Archived)
- **WorkflowSteps** (stepOrder, fromStatus, toStatus, requiredRole)
- **ContentApprovals** (contentId, approverUserId, approvalStatus, comments)
- **Categories/Tags** (hierarchical + many-to-many junction)

**BÃ i há»c rÃºt ra:**
- âœ… Content lifecycle rÃµ rÃ ng â†’ status: ideaâ†’draftâ†’reviewâ†’approvedâ†’publishedâ†’archived
- âœ… Content type system â†’ contentType select field
- âœ… Approval workflow â†’ Giai Ä‘oáº¡n sau, giá» dÃ¹ng status + agent

### 5. Brand Management System Best Practices
**Cáº¥u trÃºc chuáº©n:**
- **Brands** (name, description, mission, vision)
- **Assets** (title, filePath, assetType, keywords, brandId, versionNumber)
- **BrandGuidelines** (sectionTitle, content, usageRules, associatedAssets)
- **ColorPalettes** (colorName, hex, RGB, CMYK, usageContext)
- **Typography** (fontName, usage, weights, sizes)
- **Templates** (name, type, file, preview, brandId)

**BÃ i há»c rÃºt ra:**
- âœ… Brand Guidelines tÃ¡ch riÃªng â†’ brand_guidelines table
- âœ… Color/Typography lÃ  structured data â†’ JSON trong brands
- âœ… Templates concept â†’ Giai Ä‘oáº¡n sau

### 6. Customer Persona Best Practices
**Cáº¥u trÃºc chuáº©n:**
- **Demographics**: age, gender, income, education, occupation, location, maritalStatus
- **Psychographics**: personality, values, interests, lifestyle, motivations
- **Behavioral**: buyingHabits, preferredChannels, contentEngagement, techProficiency
- **Persona meta**: personaName, description, type (Buyer/User/Influencer), quote

**BÃ i há»c rÃºt ra:**
- âœ… TÃ¡ch rÃµ demographics vs psychographics vs behavioral
- âœ… preferredChannels ráº¥t quan trá»ng cho marketing automation
- âœ… Quote/scenario giÃºp team hiá»ƒu persona nhanh hÆ¡n

---

## ğŸ“ NguyÃªn Táº¯c Thiáº¿t Káº¿ (Cáº­p Nháº­t)

1. **Brand-Centric** (há»c tá»« HubSpot): Má»i thá»© xoay quanh `brands` â€” thay vÃ¬ Contact lÃ m trung tÃ¢m
2. **Agent-Friendly**: Má»—i record cÃ³ `userId` + má»i trÆ°á»ng dÃ¹ng tÃªn rÃµ rÃ ng Ä‘á»ƒ agent Ä‘á»c schema
3. **Content Lifecycle** (há»c tá»« CMS best practices): Status workflow rÃµ rÃ ng cho content
4. **Flexible Tagging** (há»c tá»« Mailchimp/ActiveCampaign): JSON arrays cho tags, thay vÃ¬ junction tables
5. **Relational Integrity**: PocketBase relations cho FK, khÃ´ng dÃ¹ng text ID
6. **Audit Trail**: `created` + `updated` (autodate) trÃªn táº¥t cáº£ tables
7. **Agent Logging** (há»c tá»« automation platforms): Ghi láº¡i má»i hÃ nh Ä‘á»™ng agent

---

## ğŸ—‚ï¸ Entity Relationship Diagram

```
users (auth)
  â”‚
  â”œâ”€â”€â”€ brands (1:N) â”€â”€â”€â”€ brand_guidelines (1:1)
  â”‚      â”‚
  â”‚      â”œâ”€â”€â”€ customer_personas (1:N)
  â”‚      â”‚
  â”‚      â”œâ”€â”€â”€ campaigns (1:N)                bnnnnbn
  â”‚      â”‚      â”œâ”€â”€ campaign_tasks (1:N)
  â”‚      â”‚      â””â”€â”€ â†” content_pieces (N:1)
  â”‚      â”‚
  â”‚      â”œâ”€â”€â”€ content_pieces (1:N)
  â”‚      â”‚
  â”‚      â””â”€â”€â”€ content_calendar (1:N)
  â”‚             â””â”€â”€ â†” content_pieces (N:1)
  â”‚
  â””â”€â”€â”€ agent_logs (1:N)
```

---

## ğŸ“‹ Chi Tiáº¿t Tá»«ng Collection

---

### 1. `users` (Auth Collection) â€” Cáº¢I TIáº¾N

> Giá»¯ nguyÃªn cáº¥u trÃºc auth PocketBase, bá»• sung fields business.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK, system |
| email | email | âœ… | System, unique |
| password | password | âœ… | System |
| tokenKey | text (auto) | âœ… | System, hidden |
| emailVisibility | bool | âŒ | System |
| verified | bool | âŒ | System |
| name | text (max 255) | âŒ | TÃªn hiá»ƒn thá»‹ |
| avatar | file (image/*) | âŒ | áº¢nh Ä‘áº¡i diá»‡n |
| role | select | âŒ | `admin`, `marketer`, `viewer` |
| phone | text | âŒ | Sá»‘ Ä‘iá»‡n thoáº¡i |
| bio | text | âŒ | MÃ´ táº£ báº£n thÃ¢n |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Thay Ä‘á»•i so vá»›i hiá»‡n táº¡i:**
- Fix typo `maketer` â†’ `marketer`
- ThÃªm `viewer` role
- ThÃªm `phone`, `bio`

**Rules:**
- createRule: `""` (public signup)
- listRule: `"id = @request.auth.id"`
- viewRule: `"id = @request.auth.id"`
- updateRule: `"id = @request.auth.id"`
- deleteRule: `"id = @request.auth.id"`

---

### 2. `brands` (Base Collection) â€” THAY THáº¾ `brand_identities`

> **Entity trung tÃ¢m cá»§a há»‡ thá»‘ng** (tÆ°Æ¡ng tá»± Company trong HubSpot).
> Má»™t user cÃ³ thá»ƒ sá»Ÿ há»¯u/quáº£n lÃ½ nhiá»u brand. Táº¥t cáº£ content, campaigns, personas Ä‘á»u thuá»™c vá» má»™t brand.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| userId | relation â†’ users | âœ… | NgÆ°á»i sá»Ÿ há»¯u brand |
| name | text (max 200) | âœ… | TÃªn thÆ°Æ¡ng hiá»‡u |
| slug | text (max 100) | âŒ | URL-friendly name |
| description | editor | âŒ | MÃ´ táº£ thÆ°Æ¡ng hiá»‡u (rich text) |
| logo | file (image/*) | âŒ | File logo, upload trá»±c tiáº¿p |
| slogan | text | âŒ | Slogan/tagline |
| missionStatement | text | âŒ | TuyÃªn bá»‘ sá»© má»‡nh |
| visionStatement | text | âŒ | Táº§m nhÃ¬n |
| coreValues | json | âŒ | `["SÃ¡ng táº¡o", "Tin cáº­y", "Cháº¥t lÆ°á»£ng"]` |
| industry | text | âŒ | NgÃ nh nghá» (VD: "GiÃ¡o dá»¥c", "F&B") |
| targetMarket | text | âŒ | Thá»‹ trÆ°á»ng má»¥c tiÃªu |
| colorPalette | json | âŒ | `{"primary":"#2563EB","secondary":"#7C3AED","accent":"#F59E0B","neutral":"#6B7280"}` |
| typography | json | âŒ | `{"heading":"Inter","body":"Roboto","mono":"JetBrains Mono"}` |
| keywords | json | âŒ | SEO keywords `["marketing","AI","automation"]` |
| socialLinks | json | âŒ | `{"facebook":"url","instagram":"url","tiktok":"url","linkedin":"url","website":"url"}` |
| toneOfVoice | select (multi) | âŒ | `professional`, `friendly`, `bold`, `playful`, `formal`, `casual`, `inspirational`, `educational` |
| status | select | âŒ | `draft`, `active`, `archived` |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Index**: `UNIQUE(slug)` where slug != ''

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `"userId = @request.auth.id || @request.auth.role = 'admin'"`
- deleteRule: `"userId = @request.auth.id || @request.auth.role = 'admin'"`

**So sÃ¡nh vá»›i há»‡ thá»‘ng tham kháº£o:**

| Feature | HubSpot | Mailchimp | TMCP |
|---------|---------|-----------|------|
| Logo | âœ… URL | âŒ | âœ… File upload |
| Colors | âŒ | âŒ | âœ… JSON palette |
| Social links | âœ… | âŒ | âœ… JSON |
| Tone of voice | âŒ | âŒ | âœ… Multi-select |
| Mission/Vision | âŒ | âŒ | âœ… |
| Status lifecycle | âŒ | âŒ | âœ… draftâ†’activeâ†’archived |

---

### 3. `brand_guidelines` (Base Collection) â€” Má»šI

> **HÆ°á»›ng dáº«n thÆ°Æ¡ng hiá»‡u chi tiáº¿t** â€” Agent dÃ¹ng document nÃ y Ä‘á»ƒ táº¡o content nháº¥t quÃ¡n.
> TÆ°Æ¡ng tá»± Brand Guidelines system trong Frontify, Brandfolder.
> Má»—i brand cÃ³ tá»‘i Ä‘a 1 báº£n guidelines (1:1 relationship).

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| brandId | relation â†’ brands (cascade) | âœ… | FK, xÃ³a brand â†’ xÃ³a guidelines |
| voiceAndTone | editor | âŒ | HÆ°á»›ng dáº«n giá»ng vÄƒn chi tiáº¿t (rich text) |
| messagingFramework | editor | âŒ | Khung thÃ´ng Ä‘iá»‡p: value props, key messages |
| doList | json | âŒ | `["DÃ¹ng ngÃ´n ngá»¯ tÃ­ch cá»±c","Gá»i khÃ¡ch hÃ ng báº±ng báº¡n"]` |
| dontList | json | âŒ | `["KhÃ´ng dÃ¹ng tá»« lÃ³ng","KhÃ´ng phÃ³ng Ä‘áº¡i"]` |
| contentPillars | json | âŒ | `["Education","Inspiration","Product","Community"]` |
| hashtagStrategy | json | âŒ | `{"branded":["#TMCP","#TMCPmarketing"],"industry":["#Marketing","#AI"],"campaign":[]}` |
| writingStyle | text | âŒ | VD: "Ngáº¯n gá»n, sÃºc tÃ­ch, dá»… hiá»ƒu" |
| targetEmotions | json | âŒ | `["tin tÆ°á»Ÿng","hÃ o há»©ng","an tÃ¢m"]` |
| competitorNotes | editor | âŒ | PhÃ¢n tÃ­ch Ä‘á»‘i thá»§ (rich text) |
| sampleContent | editor | âŒ | Máº«u content tham kháº£o |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `"@request.auth.id != ''"`
- deleteRule: `"@request.auth.id != ''"`

**Táº¡i sao tÃ¡ch riÃªng, khÃ´ng gá»™p vÃ o brands?**
- Agent cáº§n Ä‘á»c guidelines riÃªng khi táº¡o content (khÃ´ng cáº§n load toÃ n bá»™ brand data)
- Guidelines thÆ°á»ng dÃ i vÃ  cáº­p nháº­t thÆ°á»ng xuyÃªn
- TÃ¡ch ra giÃºp quáº£n lÃ½ version dá»… hÆ¡n

---

### 4. `customer_personas` (Base Collection) â€” THAY THáº¾ `customer_profiles`

> **ChÃ¢n dung khÃ¡ch hÃ ng má»¥c tiÃªu** â€” LiÃªn káº¿t trá»±c tiáº¿p vá»›i brand.
> Dá»±a trÃªn mÃ´ hÃ¬nh Buyer Persona chuáº©n: Demographics + Psychographics + Behavioral.
> Agent sá»­ dá»¥ng persona Ä‘á»ƒ táº¡o content phÃ¹ há»£p target audience.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| brandId | relation â†’ brands | âœ… | Thuá»™c brand nÃ o |
| userId | relation â†’ users | âŒ | NgÆ°á»i táº¡o |
| name | text | âœ… | TÃªn persona (VD: "Chá»‹ Lan - Ná»™i trá»£ 35T") |
| avatar | file (image/*) | âŒ | HÃ¬nh minh há»a persona |
| quote | text | âŒ | CÃ¢u nÃ³i Ä‘áº¡i diá»‡n (VD: "TÃ´i muá»‘n tiáº¿t kiá»‡m thá»i gian") |
| **â€” Demographics â€”** | | | |
| ageRange | text | âŒ | VD: "25-35" |
| gender | select | âŒ | `male`, `female`, `other`, `all` |
| location | text | âŒ | Vá»‹ trÃ­ Ä‘á»‹a lÃ½ (VD: "TP.HCM, HÃ  Ná»™i") |
| occupation | text | âŒ | Nghá» nghiá»‡p |
| education | select | âŒ | `high_school`, `college`, `university`, `postgrad` |
| incomeLevel | select | âŒ | `low`, `medium`, `high`, `premium` |
| maritalStatus | select | âŒ | `single`, `married`, `other` |
| **â€” Psychographics â€”** | | | |
| interests | json | âŒ | `["CÃ´ng nghá»‡","Du lá»‹ch","áº¨m thá»±c"]` |
| values | json | âŒ | `["Gia Ä‘Ã¬nh","Sá»©c khá»e","Tiá»‡n lá»£i"]` |
| lifestyle | text | âŒ | MÃ´ táº£ lá»‘i sá»‘ng |
| personality | json | âŒ | `["Cáº©n tháº­n","ThÃ­ch nghiÃªn cá»©u"]` |
| **â€” Pain Points & Goals â€”** | | | |
| painPoints | json | âŒ | `["Thiáº¿u thá»i gian","GiÃ¡ cao","Thiáº¿u thÃ´ng tin"]` |
| goals | json | âŒ | `["Tiáº¿t kiá»‡m chi phÃ­","NÃ¢ng cao cháº¥t lÆ°á»£ng sá»‘ng"]` |
| motivations | json | âŒ | `["Khuyáº¿n mÃ£i","Reviews tá»‘t","Brand uy tÃ­n"]` |
| objections | json | âŒ | `["Sá»£ lá»«a Ä‘áº£o","Ngáº¡i thá»­ sáº£n pháº©m má»›i"]` |
| **â€” Behavioral â€”** | | | |
| preferredChannels | select (multi) | âŒ | `facebook`, `instagram`, `tiktok`, `linkedin`, `email`, `website`, `youtube`, `zalo` |
| contentPreferences | json | âŒ | `["Video ngáº¯n","Infographic","Review"]` |
| buyingBehavior | text | âŒ | MÃ´ táº£ hÃ nh vi mua hÃ ng |
| onlineHabits | text | âŒ | ThÃ³i quen online (VD: "LÆ°á»›n FB buá»•i tá»‘i") |
| **â€” Meta â€”** | | | |
| notes | editor | âŒ | Ghi chÃº bá»• sung (rich text) |
| status | select | âŒ | `draft`, `active`, `archived` |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `"@request.auth.id != ''"`
- deleteRule: `"@request.auth.id != ''"`

**So sÃ¡nh vá»›i há»‡ thá»‘ng tham kháº£o:**

| Feature | HubSpot Contact | ActiveCampaign | TMCP Persona |
|---------|-----------------|----------------|-------------|
| Demographics | âœ… CÆ¡ báº£n | âœ… Custom fields | âœ… Structured fields |
| Psychographics | âŒ | âŒ | âœ… interests, values, personality |
| Pain Points | âŒ | âŒ | âœ… JSON array |
| Goals | âŒ | âŒ | âœ… JSON array |
| Preferred Channels | âŒ | âœ… Lists | âœ… Multi-select |
| Content Preferences | âŒ | âŒ | âœ… JSON array |
| Objections | âŒ | âŒ | âœ… JSON array |
| Quote | âŒ | âŒ | âœ… Representative quote |

---

### 5. `campaigns` (Base Collection) â€” THAY THáº¾ `marketing_campaigns`

> **Chiáº¿n dá»‹ch marketing** â€” TÆ°Æ¡ng tá»± HubSpot Campaigns nhÆ°ng bá»• sung nhiá»u metadata.
> CÃ³ status lifecycle Ä‘áº§y Ä‘á»§, dates, budget, KPI targets.
> Agent cÃ³ thá»ƒ táº¡o vÃ  quáº£n lÃ½ campaigns.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| brandId | relation â†’ brands | âœ… | Thuá»™c brand nÃ o |
| userId | relation â†’ users | âŒ | NgÆ°á»i táº¡o |
| name | text | âœ… | TÃªn chiáº¿n dá»‹ch |
| description | editor | âŒ | MÃ´ táº£ chi tiáº¿t (rich text) |
| objective | text | âŒ | Má»¥c tiÃªu (VD: "TÄƒng nháº­n diá»‡n thÆ°Æ¡ng hiá»‡u") |
| campaignType | select | âŒ | `awareness`, `engagement`, `conversion`, `retention`, `launch`, `seasonal`, `event` |
| targetPersonas | relation â†’ customer_personas (multi) | âŒ | Persona(s) má»¥c tiÃªu |
| channels | select (multi) | âŒ | `facebook`, `instagram`, `tiktok`, `linkedin`, `email`, `website`, `blog`, `youtube`, `zalo` |
| status | select | âœ… | `draft`, `planning`, `active`, `paused`, `completed`, `cancelled` |
| startDate | date | âŒ | NgÃ y báº¯t Ä‘áº§u |
| endDate | date | âŒ | NgÃ y káº¿t thÃºc |
| budget | number | âŒ | NgÃ¢n sÃ¡ch (VND) |
| kpiTargets | json | âŒ | `{"reach":10000,"engagement":500,"leads":50,"conversion":20}` |
| kpiActual | json | âŒ | KPI thá»±c táº¿ â€” agent/user cáº­p nháº­t |
| language | select (multi) | âŒ | `vi`, `en` |
| toneOfVoice | text | âŒ | Giá»ng vÄƒn riÃªng cho campaign (override brand default) |
| positioning | text | âŒ | Äá»‹nh vá»‹ thÆ°Æ¡ng hiá»‡u trong campaign |
| valueProposition | text | âŒ | GiÃ¡ trá»‹ Ä‘á» xuáº¥t chÃ­nh |
| keyMessages | json | âŒ | `["Tiáº¿t kiá»‡m 50%","Miá»…n phÃ­ váº­n chuyá»ƒn"]` |
| tags | json | âŒ | `["launch","seasonal","promotion"]` |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Indexes**: `(brandId, status)`, `(userId)`, `(startDate)`

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `"@request.auth.id != ''"`
- deleteRule: `"@request.auth.id != ''"`

**So sÃ¡nh vá»›i há»‡ thá»‘ng tham kháº£o:**

| Feature | HubSpot | Mailchimp | TMCP |
|---------|---------|-----------|------|
| Campaign Type | âœ… | âœ… Limited | âœ… 7 types |
| Status lifecycle | âœ… Basic | âœ… Basic | âœ… 6 statuses |
| Budget | âŒ | âŒ | âœ… |
| KPI Targets | âœ… Goals | âŒ | âœ… JSON flexible |
| Target Personas | âŒ | Segments | âœ… Direct relation |
| Multi-channel | âœ… | âŒ Email only | âœ… 9 channels |
| Key Messages | âŒ | âŒ | âœ… JSON array |
| Date range | âŒ | âŒ | âœ… startDate + endDate |

---

### 6. `content_pieces` (Base Collection) â€” Há»¢P NHáº¤T `social_posts` + `posts`

> **Ná»™i dung Ä‘a ná»n táº£ng** â€” Má»™t content piece cÃ³ thá»ƒ lÃ  blog post, social post, email, ad copy...
> TÆ°Æ¡ng tá»± ContentItems trong CMS platforms.
> CÃ³ content lifecycle hoÃ n chá»‰nh: idea â†’ draft â†’ review â†’ approved â†’ published â†’ archived.
> Agent táº¡o content trá»±c tiáº¿p vÃ o Ä‘Ã¢y.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| brandId | relation â†’ brands | âœ… | Thuá»™c brand nÃ o |
| campaignId | relation â†’ campaigns | âŒ | Thuá»™c campaign nÃ o (nullable â€” standalone content) |
| userId | relation â†’ users | âŒ | NgÆ°á»i táº¡o |
| title | text | âœ… | TiÃªu Ä‘á» |
| slug | text | âŒ | URL slug (cho blog posts) |
| contentType | select | âœ… | `blog_post`, `social_post`, `email`, `ad_copy`, `landing_page`, `video_script`, `infographic`, `newsletter` |
| platform | select (multi) | âŒ | `website`, `facebook`, `instagram`, `tiktok`, `linkedin`, `twitter`, `youtube`, `email`, `zalo` |
| body | editor | âŒ | Ná»™i dung chÃ­nh (HTML/Rich text) |
| summary | text | âŒ | TÃ³m táº¯t / excerpt / caption |
| thumbnail | file (image/*) | âŒ | áº¢nh Ä‘áº¡i diá»‡n / thumbnail |
| mediaFiles | file (multi, max 10) | âŒ | HÃ¬nh áº£nh, video Ä‘Ã­nh kÃ¨m |
| seoTitle | text | âŒ | SEO Title (cho blog) |
| seoDescription | text | âŒ | SEO Meta Description |
| seoKeywords | json | âŒ | `["keyword1","keyword2"]` |
| hashtags | json | âŒ | `["#tmcp","#marketing","#AI"]` |
| callToAction | text | âŒ | CTA text/link |
| targetPersonaId | relation â†’ customer_personas | âŒ | Persona má»¥c tiÃªu cá»§a content nÃ y |
| language | select | âŒ | `vi`, `en` |
| status | select | âœ… | `idea`, `draft`, `review`, `approved`, `scheduled`, `published`, `archived` |
| scheduledAt | date | âŒ | NgÃ y dá»± kiáº¿n Ä‘Äƒng |
| publishedAt | date | âŒ | NgÃ y Ä‘Äƒng thá»±c táº¿ |
| publishedUrl | url | âŒ | Link bÃ i Ä‘Ã£ Ä‘Äƒng |
| aiGenerated | bool | âŒ | Agent táº¡o? |
| aiPrompt | text | âŒ | Prompt Ä‘Ã£ dÃ¹ng Ä‘á»ƒ táº¡o |
| engagementData | json | âŒ | `{"views":0,"likes":0,"shares":0,"comments":0,"clicks":0}` |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Indexes**: `(brandId, contentType, status)`, `(campaignId)`, `(scheduledAt)`, `(status)`

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `"@request.auth.id != ''"`
- deleteRule: `"@request.auth.id != ''"`

**Content Status Lifecycle (há»c tá»« CMS best practices):**
```
idea â†’ draft â†’ review â†’ approved â†’ scheduled â†’ published â†’ archived
  â†‘       â†‘       â”‚         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  (rejected â†’ quay láº¡i draft)
                            â””â”€â”€â†’ published
```

**So sÃ¡nh vá»›i há»‡ thá»‘ng tham kháº£o:**

| Feature | WordPress | HubSpot CMS | Mailchimp | TMCP |
|---------|-----------|-------------|-----------|------|
| Content types | Posts/Pages | Blog/Landing | Email only | âœ… 8 types |
| Multi-platform | âŒ | âŒ | âŒ | âœ… 9 platforms |
| Status workflow | âœ… 4 statuses | âœ… Basic | âœ… Basic | âœ… 7 statuses |
| SEO fields | âœ… Plugin | âœ… Built-in | âŒ | âœ… title+desc+keywords |
| AI metadata | âŒ | âœ… AI tools | âŒ | âœ… aiGenerated+aiPrompt |
| Engagement data | âŒ In-DB | âœ… Analytics | âœ… Reports | âœ… JSON |
| Media | âœ… Library | âœ… Files | âœ… Manager | âœ… Multi-file |
| Persona targeting | âŒ | âœ… Smart content | âŒ | âœ… Direct relation |

---

### 7. `campaign_tasks` (Base Collection) â€” Cáº¢I TIáº¾N

> **Task/cÃ´ng viá»‡c trong campaign** â€” Bá»• sung assignee, priority, deadline.
> Agent cÃ³ thá»ƒ táº¡o tasks tá»± Ä‘á»™ng khi generate campaign plan.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| campaignId | relation â†’ campaigns | âœ… | Thuá»™c campaign nÃ o |
| brandId | relation â†’ brands | âŒ | Thuá»™c brand nÃ o (denormalized for query) |
| assigneeId | relation â†’ users | âŒ | NgÆ°á»i Ä‘Æ°á»£c giao |
| createdBy | relation â†’ users | âŒ | NgÆ°á»i táº¡o (hoáº·c agent) |
| title | text | âœ… | TÃªn task |
| description | editor | âŒ | MÃ´ táº£ chi tiáº¿t |
| taskType | select | âŒ | `content_creation`, `design`, `review`, `publishing`, `analytics`, `other` |
| priority | select | âŒ | `low`, `medium`, `high`, `urgent` |
| status | select | âœ… | `todo`, `in_progress`, `review`, `done`, `cancelled` |
| dueDate | date | âŒ | Deadline |
| completedAt | date | âŒ | NgÃ y hoÃ n thÃ nh thá»±c táº¿ |
| relatedContentId | relation â†’ content_pieces | âŒ | Content liÃªn quan |
| notes | editor | âŒ | Ghi chÃº |
| sortOrder | number | âŒ | Thá»© tá»± sáº¯p xáº¿p/hiá»ƒn thá»‹ |
| aiGenerated | bool | âŒ | Agent táº¡o? |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Indexes**: `(campaignId, status)`, `(assigneeId, status)`, `(dueDate)`

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `"@request.auth.id != ''"`
- deleteRule: `"@request.auth.id != ''"`

---

### 8. `content_calendar` (Base Collection) â€” THAY THáº¾ `content_calendar_events`

> **Lá»‹ch ná»™i dung & sá»± kiá»‡n** â€” LiÃªn káº¿t trá»±c tiáº¿p vá»›i content_pieces.
> Agent sá»­ dá»¥ng Ä‘á»ƒ láº­p káº¿ hoáº¡ch ná»™i dung theo timeline.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| brandId | relation â†’ brands | âœ… | Thuá»™c brand nÃ o |
| campaignId | relation â†’ campaigns | âŒ | Thuá»™c campaign nÃ o |
| contentId | relation â†’ content_pieces | âŒ | Content liÃªn quan |
| userId | relation â†’ users | âŒ | NgÆ°á»i táº¡o |
| title | text | âœ… | TiÃªu Ä‘á» sá»± kiá»‡n |
| description | text | âŒ | MÃ´ táº£ ngáº¯n |
| scheduledDate | date | âœ… | NgÃ y lÃªn lá»‹ch |
| endDate | date | âŒ | NgÃ y káº¿t thÃºc (cho events nhiá»u ngÃ y) |
| eventType | select | âŒ | `content_publish`, `holiday`, `trending`, `brand_milestone`, `meeting`, `deadline`, `promotion` |
| platform | select (multi) | âŒ | `website`, `facebook`, `instagram`, `tiktok`, `linkedin`, `youtube`, `zalo` |
| status | select | âŒ | `planned`, `confirmed`, `in_progress`, `published`, `cancelled` |
| color | text | âŒ | MÃ£ mÃ u hiá»ƒn thá»‹ `"#FF5733"` |
| allDay | bool | âŒ | Sá»± kiá»‡n cáº£ ngÃ y? |
| notes | text | âŒ | Ghi chÃº |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

**Indexes**: `(brandId, scheduledDate)`, `(campaignId)`

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `"@request.auth.id != ''"`
- deleteRule: `"@request.auth.id != ''"`

---

### 9. `agent_logs` (Base Collection) â€” Má»šI

> **Logging hoáº¡t Ä‘á»™ng agent** â€” Audit trail cho má»i hÃ nh Ä‘á»™ng AI.
> TÆ°Æ¡ng tá»± Activities/Interactions table trong HubSpot.
> GiÃºp debug, review cháº¥t lÆ°á»£ng output agent, vÃ  tÃ­nh toÃ¡n usage.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| userId | relation â†’ users | âŒ | User Ä‘Ã£ trigger agent |
| brandId | relation â†’ brands | âŒ | Brand context |
| agentName | text | âœ… | `strategist`, `content_creator`, `seo_optimizer`, `analyst` |
| action | text | âœ… | VD: `create_content`, `analyze_brand`, `generate_campaign` |
| input | json | âŒ | Input payload gá»­i cho agent |
| output | json | âŒ | Output payload nháº­n Ä‘Æ°á»£c |
| status | select | âœ… | `started`, `processing`, `success`, `failed`, `timeout` |
| errorMessage | text | âŒ | Error message náº¿u failed |
| durationMs | number | âŒ | Thá»i gian xá»­ lÃ½ (milliseconds) |
| tokensUsed | number | âŒ | Sá»‘ tokens LLM sá»­ dá»¥ng |
| modelName | text | âŒ | Model Ä‘Ã£ dÃ¹ng (VD: "qwen2.5") |
| relatedCollection | text | âŒ | Collection name liÃªn quan |
| relatedRecordId | text | âŒ | Record ID Ä‘Ã£ táº¡o/cáº­p nháº­t |
| created | autodate | âœ… | |

**Indexes**: `(userId, created)`, `(status)`, `(agentName)`

**Rules:**
- createRule: `"@request.auth.id != ''"`
- listRule: `"@request.auth.id != ''"`
- viewRule: `"@request.auth.id != ''"`
- updateRule: `null` (khÃ´ng cho update sau khi táº¡o)
- deleteRule: `"@request.auth.role = 'admin'"`

---

### 10. `business_ideas` (Base Collection) â€” GIá»® NGUYÃŠN (Legacy)

> Giá»¯ láº¡i tá»« version 1 cho giai Ä‘oáº¡n brainstorm.
> CÃ³ thá»ƒ archive hoáº·c xÃ³a sau khi chuyá»ƒn sang giai Ä‘oáº¡n production.

| Field | Type | Required | MÃ´ táº£ |
|-------|------|----------|-------|
| id | text (auto) | âœ… | PK |
| userId | relation â†’ users | âœ… | NgÆ°á»i táº¡o |
| rawIdea | text | âœ… | Ã tÆ°á»Ÿng thÃ´ |
| productCore | json | âŒ | Agent phÃ¢n tÃ­ch |
| created | autodate | âœ… | |
| updated | autodate | âœ… | |

---

## ğŸ—‘ï¸ Collections Bá»‹ Thay Tháº¿

| Collection CÅ© | Thay Tháº¿ Báº±ng | LÃ½ Do |
|---|---|---|
| `brand_identities` | **`brands`** + **`brand_guidelines`** | TÃ¡ch identity vs guidelines. Brands lÃ  entity trung tÃ¢m. |
| `customer_profiles` | **`customer_personas`** | Rename. ThÃªm demographics/psychographics/behavioral Ä‘áº§y Ä‘á»§. LiÃªn káº¿t brand. |
| `marketing_campaigns` | **`campaigns`** | TÃªn ngáº¯n gá»n. ThÃªm campaignType, status lifecycle, dates, budget, KPI. |
| `social_posts` | **`content_pieces`** | Há»£p nháº¥t ALL content types. Social post = `contentType: "social_post"`. |
| `posts` (blog) | **`content_pieces`** | Blog post = `contentType: "blog_post"`. Thá»‘ng nháº¥t quáº£n lÃ½. |
| `content_calendar_events` | **`content_calendar`** | TÃªn ngáº¯n gá»n. ThÃªm relation Ä‘áº¿n content_pieces. |

---

## ğŸ” Access Rules Summary

| Collection | Create | List/View | Update | Delete |
|------------|--------|-----------|--------|--------|
| users | Public signup | Own record | Own record | Own record |
| brands | Auth | Auth | Owner/Admin | Owner/Admin |
| brand_guidelines | Auth | Auth | Auth | Auth |
| customer_personas | Auth | Auth | Auth | Auth |
| campaigns | Auth | Auth | Auth | Auth |
| content_pieces | Auth | Auth | Auth | Auth |
| campaign_tasks | Auth | Auth | Auth | Auth |
| content_calendar | Auth | Auth | Auth | Auth |
| agent_logs | Auth | Auth | âŒ KhÃ´ng cho update | Admin only |
| business_ideas | Auth | Auth | Auth | Auth |

> **Ghi chÃº**: Giai Ä‘oáº¡n Ä‘áº§u dÃ¹ng rules Ä‘Æ¡n giáº£n (Auth = authenticated).
> Giai Ä‘oáº¡n sau sáº½ bá»• sung brand-scoped rules: `brandId.userId = @request.auth.id`

---

## ğŸ“Š Tá»•ng Káº¿t

### Collections theo Module

| Module | Collections | MÃ´ táº£ |
|--------|-------------|-------|
| ğŸ” **Auth** | `users` | Quáº£n lÃ½ user, role, authentication |
| ğŸ·ï¸ **ThÆ°Æ¡ng hiá»‡u** | `brands`, `brand_guidelines` | Brand identity, visual guidelines, tone of voice |
| ğŸ‘¥ **KhÃ¡ch hÃ ng** | `customer_personas` | Buyer personas vá»›i demographics, psychographics, behavioral |
| ğŸ“ **Content** | `content_pieces`, `content_calendar` | Quáº£n lÃ½ ná»™i dung Ä‘a ná»n táº£ng + lá»‹ch Ä‘Äƒng bÃ i |
| ğŸ“¢ **Campaigns** | `campaigns`, `campaign_tasks` | Chiáº¿n dá»‹ch marketing + tasks/cÃ´ng viá»‡c |
| ğŸ¤– **Agent** | `agent_logs` | Logging hoáº¡t Ä‘á»™ng AI agent |
| ğŸ“¦ **Legacy** | `business_ideas` | Ã tÆ°á»Ÿng kinh doanh (giá»¯ táº¡m) |

### Thá»‘ng kÃª

| Metric | GiÃ¡ trá»‹ |
|--------|---------|
| **Tá»•ng collections** | 10 (+ 4 system PocketBase) |
| **Collections má»›i** | 3 (`brand_guidelines`, `agent_logs`, `content_calendar`) |
| **Collections cáº£i tiáº¿n** | 5 (`users`, `brands`, `customer_personas`, `campaigns`, `content_pieces`, `campaign_tasks`) |
| **Collections xÃ³a** | 4 (`brand_identities`, `customer_profiles`, `marketing_campaigns`, `social_posts`, `posts`) |
| **Collections giá»¯ nguyÃªn** | 1 (`business_ideas`) |

### Agent Integration Points

Agent cáº§n truy cáº­p cÃ¡c collections theo thá»© tá»± sau khi nháº­n task:

1. **Äá»c `brands`** â†’ Hiá»ƒu thÆ°Æ¡ng hiá»‡u
2. **Äá»c `brand_guidelines`** â†’ Hiá»ƒu tone, voice, do/dont
3. **Äá»c `customer_personas`** â†’ Hiá»ƒu target audience
4. **Äá»c `campaigns`** â†’ Hiá»ƒu context campaign hiá»‡n táº¡i
5. **Táº¡o `content_pieces`** â†’ Viáº¿t content
6. **Táº¡o `campaign_tasks`** â†’ Láº­p káº¿ hoáº¡ch
7. **Táº¡o `content_calendar`** â†’ LÃªn lá»‹ch Ä‘Äƒng bÃ i
8. **Ghi `agent_logs`** â†’ Log má»i action

---

## ğŸ”„ Migration Strategy

### BÆ°á»›c 1: Táº¡o migration má»›i
- Viáº¿t PocketBase migration Go file vá»›i collection snapshot má»›i
- Bao gá»“m cáº£ system collections (giá»¯ nguyÃªn)

### BÆ°á»›c 2: Deploy & verify
- Test trÃªn local trÆ°á»›c
- Verify táº¥t cáº£ relations hoáº¡t Ä‘á»™ng
- Verify rules hoáº¡t Ä‘á»™ng

### BÆ°á»›c 3: Update Frontend (tmcp-marketing-hub)
- Cáº­p nháº­t `pb.js` client
- Cáº­p nháº­t táº¥t cáº£ pages sá»­ dá»¥ng collection names má»›i
- Cáº­p nháº­t field names má»›i

### BÆ°á»›c 4: Update Agent (tmcp-agents)
- Cáº­p nháº­t MCP resources cho schema má»›i
- Cáº­p nháº­t agent prompts vá»›i collection/field names má»›i
- Test agent CRUD operations

================================================================================